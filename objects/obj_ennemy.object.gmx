<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>0</visible>
  <depth>-5</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Phase 1 : ol' weirdo walkin'
if(phase == 1){
    //When he's walking and the player is nearby
    playerInAggroZone = obj_character.x &gt;= x - aggroZone &amp;&amp; obj_character.x &lt;= x + aggroZone;
    if(playerInAggroZone &amp;&amp; walk){
        walk = false;
        strike = true;
        wait = -1;
    }
    
    //Striking pattern : run towards the player, attacks him when close
    if(strike){
        //First time the player is in the aggro zone while a walk pattern
        if(wait == -1){
            image_xscale = behindPlayer();
            currentHSpeed = (moveSpeed - 2) * behindPlayer();
            wait = 60; //Don't run forever
        }
        //If the player is close : attacks then wait
        if(distance_to_point(obj_character.x, obj_character.y) &lt; 40){
            currentHSpeed = 0;
            wait = 40;
        }
        
        if(wait &gt; 0){
            wait --;
        }
        else if(wait == 0){
            if (playerInAggroZone){ //If in the aggro zone : run again !
                wait = -1;
            }
            else { //If not, continue walking
                walk = true;
                currentHSpeed = moveSpeed;
            }
        }
    }
    //walking around the room
    if(walk){
        if(wait &gt; 0){//The boss will stay still or walk while wait is over 0
            wait--;
        }
        else {
            if(currentHSpeed != 0){//If already moving, stop moving
                currentHSpeed = 0;
                wait = irandom_range(10, 40);
            }
            else{//If not moving, start moving in a random direction on a random distance
                if(irandom_range(1, 2) == 1) dir = 1;
                else dir = -1;
                currentHSpeed = moveSpeed * dir;
                image_xscale = dir;
                wait = irandom_range(10, 100);//Random distance range
            }
        }
    }
    
    if(hp &lt;= 0){//ded
        walk = false;
        strike = false;
        transition = true;
        currentHSpeed = 0;
        sprite_index = spr_boss1_2;
        image_index = 0;
        image_speed = 0.2;
        hp = phase2hp;
        recovery = 0;
    }
    
    //Animations towards phase 2
    if(transition){
        if(image_index &gt;= sprite_get_number(spr_boss1_2) - image_speed){
            sprite_index = spr_boss1_3;
            image_speed = 0.3;     
            phase = 2;
            transition = false;
        }
    }
    //Turn over when it hits a wall
    if(place_meeting(x + hspeed, y, obj_ground01)){
        currentHSpeed *= -1;
        image_xscale *= -1;
    }
    hspeed = currentHSpeed;
}


 
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>image_speed = 0.5;

//General variables
wait = 0;
moveSpeed = -3;
currentHSpeed = moveSpeed;
stopMoving = false;
aggroZone = 250;
damage = 10;
hp = 200; //Hp on phase 1
phase = 2;
recoveryFrames = 30;//Recovery time when being hited phase 1 &amp; 2
recovery = 0;
invulnerabilityFrames = 35;//Invulnerability time on patterns phase 3
invulnerability = 0;
invulnerable = false;
transition = false;
pattern = 0;
followPlayer = false;
//Phase 1 states
strike = false;
walk = true;

//Phase 2 states
phase2hp = 200;
startFlying = false;
fly = false;
flyOut = false;
flyMid = false;
launch = true;
rotate = false;
attack = false;
//Animations variables
yMaxLimit = 280;
yMinLimit = 270;
xMinLimit = view_xview + 200;
xMaxLimit = view_wview - 200;
currentVSpeed = 0;
rotationSpeed = 0;
currentRotation = 0;
rotationDir = -1;
flyOutDir = 1;
//Attack
prevPattern = -1;
patternCount = 0;
nextAttack = 2;
stopPattern = 25;



//Lighting variables
darkness = 200;
darknessMin = 150;
lightFade = false;
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
